<?xml version="1.0" encoding="utf-8"?>
<mate:EventMap xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:mate="http://mate.asfusion.com/" xmlns:mx="library://ns.adobe.com/flex/mx">
	<fx:Script>
		<![CDATA[
			import ch.plannr.client.core.Context;
			import ch.plannr.client.events.UserLoginEvent;
			import ch.plannr.client.events.UserRegisterEvent;
			import ch.plannr.client.model.User;
			
			import com.asfusion.mate.core.SmartObject;
			
			import mx.controls.Alert;
			import mx.utils.Base64Encoder;
			
			private function generate(event:Object):XML{
				trace(event);
					return new XML("<user></user>");
			}
		]]>
	</fx:Script>
	<fx:Declarations>
		<!--Services-->
		<mx:HTTPService id="loginService" url="http://localhost:8080/webservices/register" method="POST" contentType="application/xml" headers="{Context.getInstance().getAuthorizationHeaders()}"/>
		<mx:HTTPService id="registrationService" url="http://localhost:8080/webservices/register" method="POST" contentType="application/xml" resultFormat="e4x"/>
		
		<!--Event Handlers-->
		<mate:EventHandlers type="{UserRegisterEvent.ID}" debug="true">
			<mate:HTTPServiceInvoker request="{event.requestBody}" instance="{registrationService}">
				<mate:resultHandlers>
					<mate:ServiceResponseAnnouncer type="result"/>
				</mate:resultHandlers>
				<mate:faultHandlers>
					<mate:ServiceResponseAnnouncer type="fault"/>
				</mate:faultHandlers>
			</mate:HTTPServiceInvoker>
		</mate:EventHandlers>
		<mate:EventHandlers type="{UserLoginEvent.ID}" debug="true">
			<mate:HTTPServiceInvoker instance="{registrationService}">
				<mate:resultHandlers>
					<mate:ServiceResponseAnnouncer type="result"/>
				</mate:resultHandlers>
				<mate:faultHandlers>
					<mate:ServiceResponseAnnouncer type="fault"/>
				</mate:faultHandlers>
			</mate:HTTPServiceInvoker>
		</mate:EventHandlers>
	</fx:Declarations>
</mate:EventMap>
