<?xml version="1.0" encoding="utf-8"?>
<!--
///////////////////////////////////////////////////////////////////////////////
// Licensed Materials - Property of IBM
// 5724-Y31,5724-Z78
// Â© Copyright IBM Corporation 2007, 2010. All Rights Reserved.
//
// Note to U.S. Government Users Restricted Rights:
// Use, duplication or disclosure restricted by GSA ADP Schedule
// Contract with IBM Corp.
///////////////////////////////////////////////////////////////////////////////
-->

<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" title="@Resource(bundle='plannr', key='plannr.dialog.notification.title')" 
  layout="vertical" showCloseButton="true" creationComplete="init()" 
  paddingTop="10" paddingLeft="10" paddingRight="10" paddingBottom="10" horizontalAlign="center" >

  <mx:Script>
    <![CDATA[
      import mx.formatters.DateFormatter;
      import ilog.calendar.CalendarItem;
      import mx.events.CloseEvent;
      import mx.events.FlexEvent;
      
      private var _item:CalendarItem;
      
      public function init():void {
        if (_item != null) {
          setText();
        }
      }
      
      public function set item(value:CalendarItem):void {
        _item = value;
        if (theLabel != null && _item != null) {
          setText();
        } 
      }
      
      private function setText():void {
        var df:DateFormatter = new DateFormatter();
        df.formatString = resourceManager.getString("plannr", "plannr.event.hour.format");
        theLabel.text = "\"" + _item.summary + "\" is starting at " + df.format(item.startTime);
      }
      
      public function get item():CalendarItem {
        return _item;
      }  
      
      public function okClicked():void {
        dispatchEvent(new CloseEvent(CloseEvent.CLOSE));
      }
      
      public function snoozeClicked():void {
        dispatchEvent(new SnoozeEvent(SnoozeEvent.SNOOZE, item));
      }
      
    ]]>
  </mx:Script>
    
  <mx:Label id="theLabel" />
  
  <mx:HBox>
    <mx:Button id="okButton" label="OK" click="okClicked()" />    
    <mx:Button id="snoozeButton" label="Snooze" toolTip="Snooze 5 minutes" click="snoozeClicked()" />
  </mx:HBox>
  
</mx:TitleWindow>
