<?xml version="1.0" encoding="utf-8"?>
<s:NavigatorContent label="Register" width="100%" height="100%"  
					xmlns:fx="http://ns.adobe.com/mxml/2009" 
					xmlns:s="library://ns.adobe.com/flex/spark" 
					xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:registerservice="ch.plannr.client.services.registerservice.*" xmlns:datatypes="ch.plannr.client.datatypes.*" xmlns:mate="http://mate.asfusion.com/">
	<fx:Script>
		<![CDATA[
			import ch.plannr.core.Context;
			import ch.plannr.event.UserRegisterEvent;
			import ch.plannr.model.User;
			
			import mx.controls.Alert;
			import mx.events.FlexEvent;
			import mx.rpc.events.ResultEvent;
			
			
			private function register():void{
				var event : UserRegisterEvent = new UserRegisterEvent(UserRegisterEvent.ID);
				event.user = new User(tiFirstName.text, tiLastname.text,tiEmail.text,tiPassword.text);
				dispatchEvent( event );
			}
			
			private function cancel():void{
				lMessage.text="";
				tiFirstName.text="";
				tiLastname.text="";
				tiEmail.text="";
				tiPassword.text="";
				tiConfirmpassword.text="";
			}
			
			/*private function handleResult(event:ResponseEvent):void{
				var success:Boolean = ((event.result as XML).@success == 'true') ? true : false;
				if(success){
					lMessage.text="You have successfully registered.";
				}
				else{
					lMessage.text="This email address has been already registered.";	
				}
			
			}
			private function handleFault(event:ResponseEvent):void{
				lMessage.text=event.result.toString()				
			}*/
		]]>
	</fx:Script>
	<fx:Declarations>
		
	</fx:Declarations>
	
	
	<mx:Form width="100%" height="100%">
		<mx:FormItem label="email address">
			<s:TextInput id="tiEmail" text="raffael.schmid@plannr.ch"/>
		</mx:FormItem>
		<mx:FormItem label="first name">
			<s:TextInput id="tiFirstName" text="Raffael"/>
		</mx:FormItem>

		<mx:FormItem label="last name">
			<s:TextInput id="tiLastname" text="Schmid"/>
		</mx:FormItem>
		<mx:FormItem label="password">
			<s:TextInput id="tiPassword" text="plannr" displayAsPassword="true"/>
		</mx:FormItem>
		<mx:FormItem label="confirm password">
			<s:TextInput id="tiConfirmpassword" text="plannr" displayAsPassword="true"/>
		</mx:FormItem>
		<mx:FormItem>
			<s:HGroup>
				<s:Button label="Register" click="register()"/><s:Button label="Cancel" click="cancel()"/>
			</s:HGroup>
		</mx:FormItem>
		<mx:Spacer height="10"/>
		<s:Label id="lMessage" text=""/>
	</mx:Form>	
</s:NavigatorContent>
