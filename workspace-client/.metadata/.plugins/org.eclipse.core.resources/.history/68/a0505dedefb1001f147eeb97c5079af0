<?xml version="1.0" encoding="utf-8"?>
<s:NavigatorContent label="Scheduler" width="100%" height="100%"  
					xmlns:fx="http://ns.adobe.com/mxml/2009" 
					xmlns:s="library://ns.adobe.com/flex/spark" 
					xmlns:mx="library://ns.adobe.com/flex/mx" 
					xmlns:ibm="http://www.ibm.com/xmlns/prod/ilog/elixir/2010"
					 xmlns:ilog="http://www.ilog.com/2007/ilog/flex">
	<fx:Script>
		<![CDATA[
			import ilog.calendar.CalendarItem;
			
			import mx.controls.Alert;
			
			import spark.events.IndexChangeEvent;
			
			/**
			 * List of calendars 
			 */ 
			[Bindable]  
			private var calendars:Array = [
				{ id: "0", label: "professional", color:0x6B56BB},
				{ id: "1", label: "personal", color:0x2B8F40},        
			];   
		
			[Bindable]
			private var totalPrice:Number = 0.00;
		
			protected function itemIndexChangeHandler(event:IndexChangeEvent):void
			{
				schedulerViewStack.selectedChild=overlays.selectedItem.show;
			}
			
			private function itemColorFunction(calItem:CalendarItem):Object {
				
				var now:Date = new Date();
				
				if (calItem.endTime < now) {
					return 0x555555;
				} else {
					var index:int = parseInt(calItem.calendar as String);
					return calendars[index].color;        
				}
			}
			
			
		]]>
	</fx:Script>
	<mx:HBox height="100%" width="100%">
		<mx:HBox width="20%" height="100%">
			<mx:Form>
				<mx:FormItem label="Overlays">
					<s:List change="itemIndexChangeHandler(event)" id="overlays" labelField="label" width="100%" height="40%">
						<s:ArrayCollection>
							<fx:Object show="{all}" label="All"></fx:Object>
							<fx:Object show="{vacation}" label="Vacation"></fx:Object>
						</s:ArrayCollection>
					</s:List>
				</mx:FormItem>
			</mx:Form>
		</mx:HBox>
		<mx:ViewStack id="schedulerViewStack" 
					  borderStyle="solid" 
					  width="80%" height="100%">
			<mx:VDividedBox width="100%" height="100%" label="All" id="all"  paddingLeft="10" paddingBottom="10" paddingRight="10" paddingTop="10">
				<mx:HBox width="100%" height="60%">
					<ilog:Calendar id="cal" width="100%" height="100%"                                           
								   animationDuration="1000"                     
								   doubleClickEnabled="true"
								   itemColorFunction="{itemColorFunction}"                      
								   allowMultipleSelection="false"                                                 
								   startDisplayedTime="[8,0]"
								   endDisplayedTime="[18,0]"
								   showItemIndicators="true"
								   columnHeaderEnabled="true">
						<ilog:currentTimeIndicatorStroke >
							<mx:SolidColorStroke alpha="0.8" color="#9C35BE" weight="2" caps="none" />
						</ilog:currentTimeIndicatorStroke>
						
						<ilog:workingTimes>
							<mx:Object rangeStart="8:00" rangeEnd="18:00"/>
						</ilog:workingTimes>  
						
						<ilog:itemVerticalRenderer>
							<mx:Component>
								                  
							</mx:Component>
						</ilog:itemVerticalRenderer>                       
						
					</ilog:Calendar>           
									</mx:HBox>
				<mx:HBox width="100%" height="40%">
					<mx:VBox width="50%" height="200">
						<mx:Form width="100%" height="100%">
							<mx:FormItem label="Title">
								<s:TextInput width="100%"/>
							</mx:FormItem>
							<mx:FormItem label="Description">
								<s:TextArea height="100" width="100%"/>
							</mx:FormItem>
						</mx:Form>
					</mx:VBox>
					<mx:VBox width="50%" height="200">
						<mx:Form width="100%" height="100%">
							<mx:FormItem label="From">
								<mx:DateField/>
							</mx:FormItem>
							<mx:FormItem label="To">
								<mx:DateField/>
							</mx:FormItem>
						</mx:Form>
					</mx:VBox>
				</mx:HBox>
			</mx:VDividedBox>
			<mx:VDividedBox width="100%" height="100%" label="All" id="vacation"  paddingLeft="10" paddingBottom="10" paddingRight="10" paddingTop="10">
			</mx:VDividedBox>
		</mx:ViewStack>
	</mx:HBox>
</s:NavigatorContent>
